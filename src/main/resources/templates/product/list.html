<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>상품 목록</title>
    <style>
        .tbl { width: 100%; border-collapse: collapse; }
        .tbl, .tbl th, .tbl td { border: 1px solid #ccc; }
        .tbl th, .tbl td { padding: 6px; text-align: left; }
        .actions { display: flex; gap: 8px; }
        .btn { border: 1px solid #bbb; padding: 4px 10px; background: #f7f7f7; cursor: pointer; }
        .btn:hover { background: #eee; }
        .topbar { display:flex; justify-content: space-between; align-items:center; margin-bottom:12px; }
    </style>
</head>
<body>
<h1>상품 목록</h1>

<div class="topbar">
    <a th:href="@{/products/new}" class="btn">새 상품 등록</a>
     <form th:action="@{/products}" method="get"> ... </form>
</div>

<p th:if="${#lists.isEmpty(items)}">등록된 상품이 없습니다.</p>

<table class="tbl" th:if="${!#lists.isEmpty(items)}">
    <thead>
    <tr>
        <th>ID</th>
        <th>이름</th>
        <th>가격</th>
        <th>재고</th>
        <th>생성</th>
        <th>액션</th>
    </tr>
    </thead>
    <tbody>
    <!-- 어디서 호출/실행: Controller.list()에서 model.addAttribute("items", service.getList())
         → 여기서 th:each로 순회 렌더링 -->
    <tr th:each="p : ${items}">
        <td th:text="${p.id}">1</td>
        <td th:text="${p.name}">샘플</td>
        <td th:text="${#numbers.formatInteger(p.price, 0, 'COMMA')}">1,000</td>
        <td th:text="${p.stock}">10</td>
        <td th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm')}">2025-10-22 12:34</td>
        <td>
            <div class="actions">

                <a th:href="@{/products/{id}/edit(id=${p.id})}" class="btn">수정</a>

                <form th:action="@{/products/{id}/delete(id=${p.id})}" method="post" style="display:inline;">

                    <button type="submit" class="btn" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</button>
                </form>
            </div>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>